---
import pic1 from '../assets/1.jpg';
import pic2 from '../assets/chips-bag.jpg';
import pic4 from '../assets/flat-lay-monochrome-paper-pieces.jpg';
import pic5 from '../assets/still-life-hanging-bag.jpg';

const products = [
  {
    title: 'Polypropylene Woven Bags',
    pic: pic1,
    description:
      ' Brew perfection with intelligent precision—automated strength control, temperature adjustment, and seamless activation create a morning routine.',
    link: 'polypropylene_woven_rice_bags',
  },
  {
    title: 'PP Mats',
    pic: pic2,
    description:
      ' Brew perfection with intelligent precision—automated strength control, temperature adjustment, and seamless activation create a morning routine.',
    link: 'pp_mats',
  },
  {
    title: 'Strapping Belts',
    pic: pic5,
    description:
      ' Brew perfection with intelligent precision—automated strength control, temperature adjustment, and seamless activation create a morning routine.',
    link: 'strapping_belts',
  },
  {
    title: 'Multi-Filament Yarn & Thread',
    pic: pic4,
    description:
      ' Brew perfection with intelligent precision—automated strength control, temperature adjustment, and seamless activation create a morning routine.',
    link: 'multi_filament_yarn_and_thread',
  },
  {
    title: 'Non-Woven Bags',
    pic: pic5,
    description:
      ' Brew perfection with intelligent precision—automated strength control, temperature adjustment, and seamless activation create a morning routine.',
    link: 'non_woven_bags',
  },
  {
    title: 'Leno Bags',
    pic: pic2,
    description:
      ' Brew perfection with intelligent precision—automated strength control, temperature adjustment, and seamless activation create a morning routine.',
    link: 'leno_bags',
  },
];
---

<section class='embla'>
  <div class='embla__viewport'>
    <div class='embla__container'>
      {
        products.map((product) => (
          <div class='embla__slide'>
            <div class='card border border--200 dark:border-gray-700 flex flex-col items-center text-center'>
              <img
                src={product.pic.src}
                alt='Google Workspace'
                class='w-full h-auto mb-4'
              />
              <h3 class='text-xl font-semibold text-gray-900 dark:text-white mb-2 capitalize'>
                {product.title}
              </h3>
              <p class='p-6 text-gray-600 dark:text-gray-300 mb-4'>
                {product.description}
              </p>
              <a
                href={`products/${product.link}`}
                class='mb-3 p-2 text-blue-500 font-semibold'
              >
                Learn More
              </a>
            </div>
          </div>
        ))
      }
    </div>
  </div>

  <div class='embla__controls'>
    <div class='embla__buttons'>
      <button class='embla__button embla__button--prev' type='button'>
        <svg class='embla__button__svg' viewBox='0 0 532 532'>
          <path
            fill='currentColor'
            d='M355.66 11.354c13.793-13.805 36.208-13.805 50.001 0 13.785 13.804 13.785 36.238 0 50.034L201.22 266l204.442 204.61c13.785 13.805 13.785 36.239 0 50.044-13.793 13.796-36.208 13.796-50.002 0a5994246.277 5994246.277 0 0 0-229.332-229.454 35.065 35.065 0 0 1-10.326-25.126c0-9.2 3.393-18.26 10.326-25.2C172.192 194.973 332.731 34.31 355.66 11.354Z'
          ></path>
        </svg>
      </button>

      <button class='embla__button embla__button--next' type='button'>
        <svg class='embla__button__svg' viewBox='0 0 532 532'>
          <path
            fill='currentColor'
            d='M176.34 520.646c-13.793 13.805-36.208 13.805-50.001 0-13.785-13.804-13.785-36.238 0-50.034L330.78 266 126.34 61.391c-13.785-13.805-13.785-36.239 0-50.044 13.793-13.796 36.208-13.796 50.002 0 22.928 22.947 206.395 206.507 229.332 229.454a35.065 35.065 0 0 1 10.326 25.126c0 9.2-3.393 18.26-10.326 25.2-45.865 45.901-206.404 206.564-229.332 229.52Z'
          ></path>
        </svg>
      </button>
    </div>

    <div class='embla__dots'></div>
  </div>
</section>

<script>
  import EmblaCarousel from 'embla-carousel';
  import Autoplay from 'embla-carousel-autoplay';
  import { addPrevNextBtnsClickHandlers } from '../scripts/EmblaCarouselArrowButtons';
  import { addDotBtnsAndClickHandlers } from '../scripts/EmblaCarouselDotButton';
  import '../styles/embla.css';
  const OPTIONS = { loop: true };

  const emblaNode = document.querySelector('.embla');
  const viewportNode = emblaNode?.querySelector('.embla__viewport');
  const prevBtnNode = emblaNode?.querySelector('.embla__button--prev');
  const nextBtnNode = emblaNode?.querySelector('.embla__button--next');
  const dotsNode = emblaNode?.querySelector('.embla__dots');

  const emblaApi = EmblaCarousel(viewportNode, OPTIONS, [
    Autoplay({ delay: 5000 }),
  ]);

  const removePrevNextBtnsClickHandlers = addPrevNextBtnsClickHandlers(
    emblaApi,
    prevBtnNode,
    nextBtnNode
  );
  const removeDotBtnsAndClickHandlers = addDotBtnsAndClickHandlers(
    emblaApi,
    dotsNode
  );

  emblaApi.on('destroy', removePrevNextBtnsClickHandlers);
  emblaApi.on('destroy', removeDotBtnsAndClickHandlers);
</script>
